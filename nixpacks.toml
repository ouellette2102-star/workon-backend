# Railway build configuration for NestJS backend
# WorkOn API - Production-ready backend
#
# NOTE: This file ONLY handles BUILD phases.
# Deployment (start, release, healthcheck) is handled by railway.json
# DO NOT add [start] section here - it overrides Railway's releaseCommand

[phases.setup]
nixPkgs = ["nodejs_20", "python3"]

[phases.install]
cmds = [
  "npm install"
]

[phases.build]
cmds = [
  "npx prisma generate",
  "npm run build"
]

# [start] section REMOVED
# Railway lifecycle is now:
# 1. Build (this file)
# 2. Release Command (railway.json → node scripts/railway-release.js)
# 3. Start Command (railway.json → npx prisma migrate deploy && node dist/main.js)
